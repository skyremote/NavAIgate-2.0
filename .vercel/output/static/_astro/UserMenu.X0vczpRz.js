import{j as e}from"./jsx-runtime.ClP7wGfN.js";import{r as t}from"./index.DK-fsZOb.js";import{getUser as f,onAuthStateChange as p,signOut as y}from"./auth.CDJVxmqK.js";import{C as v}from"./chevron-down.9OK9mT3Q.js";import{U as b}from"./user.BqMF8DsQ.js";import{c as d}from"./createLucideIcon.haOcZxDw.js";/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j=d("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w=d("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),E=({initialUser:s})=>{const[a,m]=t.useState(s||null),[n,i]=t.useState(!1),[u,x]=t.useState(!s),o=t.useRef(null);t.useEffect(()=>{s||f().then(({user:l})=>{m(l),x(!1)});const{data:{subscription:r}}=p();return()=>r.unsubscribe()},[s]),t.useEffect(()=>{const r=l=>{o.current&&!o.current.contains(l.target)&&i(!1)};return document.addEventListener("mousedown",r),()=>document.removeEventListener("mousedown",r)},[]);const h=async()=>{await y(),window.location.href="/"};if(u)return e.jsx("div",{className:"w-10 h-10 rounded-full bg-gray-800 animate-pulse"});if(!a)return e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("a",{href:"/auth/login",className:"text-gray-300 hover:text-white transition-colors text-sm font-medium",children:"Sign in"}),e.jsx("a",{href:"/auth/signup",className:"px-4 py-2 rounded-full bg-gradient-to-r from-blue-500 to-purple-600 text-white text-sm font-medium hover:from-blue-600 hover:to-purple-700 transition-all",children:"Sign up"})]});const g=a.email?.charAt(0).toUpperCase()||"U",c=a.user_metadata?.avatar_url;return e.jsxs("div",{className:"relative",ref:o,children:[e.jsxs("button",{onClick:()=>i(!n),className:"flex items-center gap-2 px-3 py-2 rounded-lg hover:bg-gray-800 transition-colors",children:[c?e.jsx("img",{src:c,alt:"Profile",className:"w-8 h-8 rounded-full object-cover"}):e.jsx("div",{className:"w-8 h-8 rounded-full bg-gradient-to-r from-blue-500 to-purple-600 flex items-center justify-center text-white text-sm font-medium",children:g}),e.jsx(v,{className:`w-4 h-4 text-gray-400 transition-transform ${n?"rotate-180":""}`})]}),n&&e.jsxs("div",{className:"absolute right-0 mt-2 w-56 rounded-lg bg-gray-800 border border-gray-700 shadow-xl py-1 z-50",children:[e.jsxs("div",{className:"px-4 py-3 border-b border-gray-700",children:[e.jsx("p",{className:"text-sm text-white font-medium truncate",children:a.email}),e.jsx("p",{className:"text-xs text-gray-400 mt-0.5",children:"NavAIgate Account"})]}),e.jsxs("div",{className:"py-1",children:[e.jsxs("a",{href:"/dashboard",className:"flex items-center gap-3 px-4 py-2 text-sm text-gray-300 hover:bg-gray-700 hover:text-white transition-colors",children:[e.jsx(b,{className:"w-4 h-4"}),"Dashboard"]}),e.jsxs("a",{href:"/dashboard/settings",className:"flex items-center gap-3 px-4 py-2 text-sm text-gray-300 hover:bg-gray-700 hover:text-white transition-colors",children:[e.jsx(w,{className:"w-4 h-4"}),"Settings"]})]}),e.jsx("div",{className:"border-t border-gray-700 py-1",children:e.jsxs("button",{onClick:h,className:"flex items-center gap-3 w-full px-4 py-2 text-sm text-red-400 hover:bg-gray-700 hover:text-red-300 transition-colors",children:[e.jsx(j,{className:"w-4 h-4"}),"Sign out"]})})]})]})};export{E as default};
